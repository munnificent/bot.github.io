<!DOCTYPE html>
<html>
<head>
  <title>Онлайн магазин</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- Подключаем скрипт от Telegram -->
  <script>
       let tg = window.Telegram.WebApp; //получаем объект webapp телеграма 

      tg.expand(); //расширяем на все окно  

      tg.MainButton.text = "Changed Text"; //изменяем текст кнопки 
      tg.MainButton.setText("Changed Text1"); //изменяем текст кнопки иначе
      tg.MainButton.textColor = "#F55353"; //изменяем цвет текста кнопки
      tg.MainButton.color = "#143F6B"; //изменяем цвет бэкграунда кнопки
      tg.MainButton.setParams({"color": "#143F6B"}); //так изменяются все параметры
      
    Telegram.WebApp.onEvent('mainButtonClicked', function(){
      // Собираем данные о каждом товаре
      var orderData = {
        item1: parseInt($("#item1").val()),
        item5: parseInt($("#item2").val())
      };

      // Вычисляем общую сумму заказа
      var totalPrice = 0;
      for (var item in orderData) {
        totalPrice += orderData[item];
      }

      // Создаем объект с полной стоимостью и заказом
      var dataToSend = {
        total: totalPrice,
        order: orderData
      };

      // Отправляем данные в строковом виде
      tg.sendData(JSON.stringify(dataToSend));
    });
  </script>
</head>
<body>
  <h1>Онлайн магазин</h1>

  <form id="order-form">
    <h2>Товары</h2>
    <div>
      <label for="item1">Товар 1</label>
      <input type="number" id="item1" name="item1" min="0" value="0">
    </div>

    <div>
      <label for="item2">Товар 2</label>
      <input type="number" id="item2" name="item2" min="0" value="0">
    </div>

    <!-- Добавьте больше товаров здесь, если необходимо -->

    <button type="submit">Отправить заказ</button>
  </form>

  <h2>Общая сумма заказа: <span id="total-price">0</span> уен</h2>
</body>
</html>