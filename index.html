<!DOCTYPE html>
<html>
<head>
  <title>Онлайн магазин</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    var MainButton = WebApp.MainButton;
    var BackButton = WebApp.BackButton;

    MainButton.show();
    MainButton.onClick(sendOrder);

    function calculateTotal(orderData) {
      let total = 0;
      for (let item in orderData) {
        total += orderData[item].quantity * orderData[item].price;
      }
      return total;
    }

    function sendOrder() {
      var orderData = {
        item1: {
          quantity: parseInt($("#item1").val()),
          price: 1000 // Замените на свою цену для товара 1
        },
        item2: {
          quantity: parseInt($("#item2").val()),
          price: 2000 // Замените на свою цену для товара 2
        }
      };

      let total = calculateTotal(orderData);
      if (confirm('Стоимость вашего заказа составляет ' + total + '. Вы уверены, что хотите продолжить?')) {
        orderData.total = total;
        tg.sendData(JSON.stringify(orderData));
      }
    }

    $(document).ready(function() {
      $('#order-form').submit(function(e) {
        e.preventDefault();
        sendOrder();
      });
    });
  </script>
</head>
<body>
  <h1>Онлайн магазин</h1>

  <form id="order-form">
    <h2>Товары</h2>
    <div>
      <label for="item1">Товар 1</label>
      <input type="number" id="item1" name="item1" min="0" value="0">
    </div>

    <div>
      <label for="item2">Товар 2</label>
      <input type="number" id="item2" name="item2" min="0" value="0">
    </div>

    <!-- Добавьте больше товаров здесь, если необходимо -->

    <button type="submit">Отправить заказ</button>
  </form>
</body>
</html>