<!DOCTYPE html>
<html>
<head>
  <title>Онлайн магазин</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- Подключаем скрипт от Telegram -->
  <script>
    var WebApp = window.Telegram.WebApp;

    WebApp.showAlert(`Добро пожаловать, @${WebApp.WebAppUser.username}.`);
    var MainButton = WebApp.MainButton;
    MainButton.show();
    
    Telegram.WebApp.onEvent('mainButtonClicked', function(){
      var orderData = {
        item1: parseInt($("#item1").val()),
        item2: parseInt($("#item2").val())
      };

      var totalPrice = Object.values(orderData).reduce((total, item) => total + item, 0);

      var dataToSend = {
        total: totalPrice,
        order: orderData
      };

      tg.sendData(JSON.stringify(dataToSend));
    });
  </script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.MainButton.setText("Changed Text1");
    tg.MainButton.setParams({
      color: "#143F6B",
      textColor: "#F55353"
    });
  </script>
</head>
<body>
  <h1>Онлайн магазин</h1>

  <form id="order-form">
    <h2>Товары</h2>
    <div>
      <label for="item1">Товар 1</label>
      <input type="number" id="item1" name="item1" min="0" value="0">
    </div>

    <div>
      <label for="item2">Товар 2</label>
      <input type="number" id="item2" name="item2" min="0" value="0">
    </div>

    <!-- Добавьте больше товаров здесь, если необходимо -->

    <button type="submit">Отправить заказ</button>
  </form>

  <h2>Общая сумма заказа: <span id="total-price">0</span> уен</h2>
</body>
</html>